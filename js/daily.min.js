var startTime,endTime,timeFromStartMs,timeUntilEndMs,userStart,userEnd,fixedEnd,intervalTimer=setInterval((function(){updateEverything()}),UPDATE_TIME),splitNotifications=[],notifications=getNotifications();function updateEverything(){updateCurrentTime(),updateEndTime(),updateStartTime(),updatePercentFinishedAndLeft()}function subtractFromDate(t,e){return t.setDate(t.getDate()-e)}function updateStartTime(){startTime=new Date(now);const t=getEventStart(),e=t.split(":"),i=e[0],n=e[1];startTime.getDay()!==endTime.getDay()&&subtractFromDate(startTime,-1),setDateToNextTime(startTime,i,n);document.getElementById("start_time_div").innerText=`Next ${t} (${twelveHourTime(startTime)}) is\n${startTime.toString()}`,setTimeUntilOrSinceEvent("time_until_start",startTime,0,"start"),timeFromStartMs=startTime.getTime()}function updateEndTime(){endTime=new Date(now);const t=getEventEnd(),e=t.split(":"),i=e[0],n=e[1];setDateToNextTime(endTime,i,n),now.getTime()>endTime.getTime()&&(subtractFromDate(endTime,-1),setDateToNextTime(endTime,i,n));document.getElementById("end_time_div").innerText=`Next ${t} (${twelveHourTime(endTime)}) is\n${endTime.toString()}`,(timeUntilEndMs=setTimeUntilOrSinceEvent("time_until_end",endTime,0,"end"))>=0&&handleNotifications(timeUntilEndMs)}function handleNotifications(t){for(const e of splitNotifications)e>=0&&isTimeToNotify(e,t)&&createNotification(`${e} minutes until end`,"",!0)}function updatePercentFinishedAndLeft(){const t=document.getElementById("percent"),e=Math.abs(startTime.getTime()-endTime.getTime());updateDuration(`${(e/MS_IN_SECOND/SEC_IN_MINUTE/MIN_IN_HOUR).toFixed(2)} hours`);const i=(e-timeUntilEndMs)/e*100;let n="";n=i>100||i<0?"--- finished, --- left":`${i.toFixed(3)} finished, ${(100-i).toFixed(3)} left`,t.innerText=n}function updateDuration(t){document.getElementById("duration").innerText=t}function setEventStart(){const t=prompt("Enter the start time in 24 hr format (example: 9:00, 13:15)");null==t||""==t?alert("INVALID INPUT"):(localStorage.removeItem("eventStart"),localStorage.setItem("eventStart",t),userStart=t)}function getEventStart(){let t=localStorage.getItem("eventStart");return null==t&&(t="9:00"),t}function setEventEnd(){const t=prompt("Enter the end time in 24 hr format (example: 17:00, 19:15)");null==t||""==t?alert("INVALID INPUT"):(localStorage.removeItem("eventEnd"),localStorage.setItem("eventEnd",t),userEnd=t)}function getEventEnd(){let t=localStorage.getItem("eventEnd");return null==t&&(t="17:00"),t}function setNotifications(){const t=prompt("Enter notifications");null==t||""==t?alert("INVALID INPUT"):(localStorage.removeItem("dailyNotifications"),localStorage.setItem("dailyNotifications",t),notifications=getNotifications(),showNotifications())}function getNotifications(){let t=localStorage.getItem("dailyNotifications");return null==t&&(t="0"),splitNotifications=t.split(","),t}function showNotifications(){document.getElementById("notifications_div").innerText=notifications}showNotifications();